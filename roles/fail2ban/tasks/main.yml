- name: EPEL repo
  package:
    name: epel-release
    state: present

- name: fail2ban-server
  package:
    name: fail2ban-server
    state: present

- name: fail2ban-systemd
  package:
    name: fail2ban-systemd
    state: present

- name: /etc/fail2ban/jail.local
  template:
    src: jail.local
    dest: /etc/fail2ban/jail.local
  notify:
    - reload fail2ban

- name: start fail2ban on boot
  service:
    name: fail2ban
    enabled: yes
    state: started
